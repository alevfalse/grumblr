<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <link rel="shortcut icon" href="/images/favicon.ico" />
   <title>Grumblr | Settings</title>

   <!-- semantic-ui styles -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css" />
   <!-- main css -->
   <link rel="stylesheet" href="./css/settings.css">
</head>

<body>
<!-- Navigation Bar Component -->
<% include ../public/components/navbar/navbar.ejs %>
<!-- 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->







<div id="content">
<div class="settingsContainer">
<form action="" class="ui form" method="POST">
    <!-- ==================================================================== -->
    <h1 class="ui top attached header" id="generalSettingsHeaderSegment">
        General Settings
        <div class="sub header">Manage your account settings</div>
    </h1>
    <!-- ==================================================================== -->
    <div class="ui attached segment">
        <div class="two fields">
            <div class="field">
                <label>First name</label>
                <input type="text" placeholder="First Name" value="<%=user.firstName%>" required>
            </div>
            <div class="field">
                <label>Last name</label>
                <input type="text" placeholder="Last Name" value="<%=user.lastName%>" required>
            </div>
        </div>
    </div>
    <!-- ==================================================================== -->
    <div class="ui attached header" id="changePasswordHeader">
        <h3 class="ui header">
            Password Settings
            <div class="sub header">Manage your account settings</div>
        </h3>
        <button type="button" class="ui button teal" id="editIconButton" onclick="changePassword()">
            <i class="edit icon"></i>
            edit
        </button>
    </div>
    <!-- ==================================================================== -->
    <div class="ui attached segment" id="changePasswordSettingsSegment">
        <div class="field">
            <div class="field disabled" id="currentPassword">
                <label>Current Password</label>
                <input type="password" placeholder="Current Password">
            </div>
        </div>
        <div class="two fields">
            <div class="field disabled" id="newPassword">
                <label>New Password</label>
                <input type="password" placeholder="New Password">
            </div>
            <div class="field disabled" id="confirmPassword">
                <label>Confirm Password</label>
                <input type="password" placeholder="Confirm Password">
            </div>
        </div>
    </div>
    <!-- ==================================================================== -->







    <h1 class="ui top attached header" id="profileSettingsHeaderSegment">
        Profile Settings
    </h1>
    <!-- ==================================================================== -->
    <div class="ui attached segment">
        <div class="profilePictureUpload">
            <div class="ui image" id="profileImageContainer">
                <img src="images/profileImage.png" alt="avatar" id="profileImage">
            </div>
            <div class="field" id="uploadProfileImageContainer">
                <h4><strong>Avatar Image</strong></h4>
                <input type="file" accept="image/*" id="uploadProfileImageInput" onchange="changeProfilePicture(event)">
            </div>
        </div>
        

        <div class="headerImageUpload">
            <div class="ui image" id="headerImageContainer">
                <img src="images/headerImage.png" alt="" id="headerImage">
            </div>
            <div class="field" id="uploadHeaderImageContainer">
                <h4><strong>Header Image</strong></h4>
                <input type="file" accept="images/*" name="" id="uploadHeaderImageInput" onchange="changeHeaderImage(event)">
            </div>
        </div>

        <div class="biographySection">
            <div class="field">
                <h4>Biography</h4>
                <textarea name="biography" id="biographyField" cols="30" rows="10"><%=user.bio%></textarea>
            </div>
        </div>

    </div>
    <div class="ui attached segment" id="saveChangesSegment">
        <div class="ui input">
            <input type="submit" value="Save" class="ui button teal">
            <input type="reset" value="cancel" class="ui button" id="cancelButton" onclick="resetImages()">
        </div>
    </div>

</form>
</div>
</div>





<!--
SEMANTIC-UI SCRIPTS ==========================================================================================================================================-->
<!-- jquery should be above the semantic.js due to having dependencies -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- semantic-ui javascript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.js"></script>
<!--MAIN SCRIPTS =============================================================================================================================================-->

<!-- main script -->
<script>

// SEMANTIC-UI dropdown function
$('.ui.dropdown')
	.dropdown()
;


// Change Profile Picture Function
function changeProfilePicture(event) {
    var image = document.getElementById("profileImage");
    image.src = URL.createObjectURL(event.target.files[0]);
}
function changeHeaderImage(event) {
    var image = document.getElementById("headerImage");
    image.src = URL.createObjectURL(event.target.files[0]);
}

// Change Password Function
function changePassword() {
var currentPassword = document.getElementById('currentPassword');
var newPassword = document.getElementById('newPassword');
var confirmPassword = document.getElementById('confirmPassword');

currentPassword.classList.toggle('disabled');
newPassword.classList.toggle('disabled');
confirmPassword.classList.toggle('disabled');
}

function resetImages() {
    var profileimage = document.getElementById("profileImage");    
    var headerimage = document.getElementById("headerImage");

    profileimage.src = "images/profileImage.png";
    headerimage.src = "images/headerImage.png";
}



</script>
</body>

</html>